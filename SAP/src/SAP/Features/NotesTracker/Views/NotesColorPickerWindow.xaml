<Window x:Class="SAP.Features.NotesTracker.Views.NotesColorPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pick Color"
        Height="340"
        Width="400"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize">

    <Border Background="{DynamicResource SurfaceBrush}"
            CornerRadius="{DynamicResource CornerRadiusMedium}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="4" Opacity="0.3"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Background="{DynamicResource BackgroundBrush}"
                    CornerRadius="12,12,0,0"
                    Padding="16,12"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <DockPanel>
                    <Button DockPanel.Dock="Right"
                            Content="âœ•"
                            Click="Cancel_Click"
                            Style="{DynamicResource GhostButtonStyle}"
                            FontSize="14"
                            Width="32"
                            Height="32"
                            Padding="0"/>
                    <TextBlock Text="Choose Color"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               VerticalAlignment="Center"/>
                </DockPanel>
            </Border>

            <!-- Content -->
            <Grid Grid.Row="1" Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Primary Colors -->
                <StackPanel>
                    <TextBlock Text="Primary Colors"
                               FontSize="12"
                               Foreground="{DynamicResource TextTertiaryBrush}"
                               Margin="0,0,0,8"/>
                    <WrapPanel>
                        <!-- App theme colors -->
                        <Button Background="#667eea" Tag="#667eea" Click="Swatch_Click" Style="{StaticResource SwatchButton}" ToolTip="Primary"/>
                        <Button Background="#8b5cf6" Tag="#8b5cf6" Click="Swatch_Click" Style="{StaticResource SwatchButton}" ToolTip="Accent"/>
                        <Button Background="#10b981" Tag="#10b981" Click="Swatch_Click" Style="{StaticResource SwatchButton}" ToolTip="Success"/>
                        <Button Background="#f59e0b" Tag="#f59e0b" Click="Swatch_Click" Style="{StaticResource SwatchButton}" ToolTip="Warning"/>
                        <Button Background="#ef4444" Tag="#ef4444" Click="Swatch_Click" Style="{StaticResource SwatchButton}" ToolTip="Danger"/>
                        <Button Background="#3b82f6" Tag="#3b82f6" Click="Swatch_Click" Style="{StaticResource SwatchButton}" ToolTip="Info"/>
                    </WrapPanel>
                </StackPanel>

                <!-- Extended Colors -->
                <StackPanel Grid.Row="1" Margin="0,16,0,0">
                    <TextBlock Text="Extended Palette"
                               FontSize="12"
                               Foreground="{DynamicResource TextTertiaryBrush}"
                               Margin="0,0,0,8"/>
                    <WrapPanel>
                        <Button Background="#B56576" Tag="#B56576" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#6AA84F" Tag="#6AA84F" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#FFD966" Tag="#FFD966" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#6FA8DC" Tag="#6FA8DC" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#C27BA0" Tag="#C27BA0" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#FF7F50" Tag="#FF7F50" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#9ACD32" Tag="#9ACD32" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#40E0D0" Tag="#40E0D0" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#ec4899" Tag="#ec4899" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                        <Button Background="#14b8a6" Tag="#14b8a6" Click="Swatch_Click" Style="{StaticResource SwatchButton}"/>
                    </WrapPanel>
                </StackPanel>

                <!-- Custom Hex Input -->
                <StackPanel Grid.Row="2" Margin="0,16,0,0">
                    <TextBlock Text="Custom Color"
                               FontSize="12"
                               Foreground="{DynamicResource TextTertiaryBrush}"
                               Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Border x:Name="ColorPreviewBorder"
                                Width="48"
                                Height="40"
                                CornerRadius="8"
                                BorderBrush="{DynamicResource BorderBrush}"
                                BorderThickness="1"
                                Background="#B56576"/>

                        <TextBox x:Name="HexBox"
                                 Grid.Column="1"
                                 Style="{DynamicResource ModernTextBox}"
                                 Margin="12,0,0,0"
                                 TextChanged="HexBox_TextChanged"
                                 FontFamily="Consolas"
                                 FontSize="14"/>
                    </Grid>
                </StackPanel>

                <!-- Buttons -->
                <StackPanel Grid.Row="4"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="0,20,0,0">
                    <Button Content="Cancel"
                            Click="Cancel_Click"
                            Style="{DynamicResource SecondaryButtonStyle}"
                            Padding="20,10"
                            Margin="0,0,12,0"
                            IsCancel="True"/>
                    <Button Content="Apply"
                            Click="Ok_Click"
                            Style="{DynamicResource PrimaryButtonStyle}"
                            Padding="20,10"
                            IsDefault="True"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>

    <Window.Resources>
        <Style x:Key="SwatchButton" TargetType="Button">
            <Setter Property="Width" Value="44"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Margin" Value="0,0,8,8"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8"
                                BorderBrush="Transparent"
                                BorderThickness="3">
                            <Border.Effect>
                                <DropShadowEffect Color="#000000" BlurRadius="4" ShadowDepth="1" Opacity="0.1"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="BorderBrush" Value="{DynamicResource PrimaryBrush}"/>
                                <Setter TargetName="Border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.2"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
</Window>
