<Window x:Class="SAP.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:SAP.ViewModels"
        xmlns:converters="clr-namespace:SAP.Converters"
        xmlns:behaviors="clr-namespace:SAP.Behaviors"
        xmlns:core="clr-namespace:SAP.Core"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=vm:MainWindowViewModel}"
        Title="{Binding Title}"
        Width="1200" Height="800"
        MinWidth="1000" MinHeight="700"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip"
        Background="Transparent">

    <Window.InputBindings>
        <!-- Module Navigation Shortcuts -->
        <KeyBinding Key="D1" Modifiers="Alt" Command="{Binding LauncherViewModel.LaunchExpireWiseCommand}"/>
        <KeyBinding Key="D2" Modifiers="Alt" Command="{Binding LauncherViewModel.LaunchAllocationBuddyCommand}"/>
        <KeyBinding Key="D3" Modifiers="Alt" Command="{Binding LauncherViewModel.LaunchEssentialsBuddyCommand}"/>
        <KeyBinding Key="D4" Modifiers="Alt" Command="{Binding LauncherViewModel.LaunchSwiftLabelCommand}"/>
        <KeyBinding Key="D5" Modifiers="Alt" Command="{Binding LauncherViewModel.LaunchNotesTrackerCommand}"/>
        
        <!-- Global Shortcuts -->
        <KeyBinding Key="T" Modifiers="Ctrl" Command="{Binding ToggleThemeCommand}"/>
        <KeyBinding Key="Escape" Command="{Binding NavigationService.NavigateBackCommand}"/>
        <KeyBinding Key="H" Modifiers="Alt" Command="{Binding NavigationService.NavigateBackCommand}"/>
        <KeyBinding Key="F1" Command="{Binding ShowAboutCommand}"/>
    </Window.InputBindings>

    <Window.Resources>
        <converters:ViewModelToViewConverter x:Key="ViewModelToView"/>
        <converters:NullToVisibilityConverter x:Key="NullToVisibility"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
    </Window.Resources>

    <!-- Custom Window Chrome -->
        <Border Background="{DynamicResource BackgroundBrush}"
            BorderBrush="{DynamicResource BorderBrush}"
            BorderThickness="1"
            CornerRadius="{DynamicResource WindowCornerRadius}">
        <Border.Effect>
            <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3" Color="#000000"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="{DynamicResource TitleBarBackgroundBrush}"
                    CornerRadius="{DynamicResource TitleBarCornerRadius}" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Title -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="16,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="⚙" FontSize="16" Foreground="{DynamicResource TitleBarTextBrush}" Margin="0,0,8,0"/>
                        <TextBlock Text="{Binding Title}" FontSize="13" FontWeight="SemiBold" 
                                   Foreground="{DynamicResource TitleBarTextBrush}" VerticalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- Window Controls -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="0,0,8,0">
                        <!-- Minimize -->
                        <Button Click="MinimizeButton_Click" ToolTip="Minimize"
                                Width="36" Height="28" Background="Transparent" BorderThickness="0" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="{DynamicResource XSmallCornerRadius}">
                                        <TextBlock Text="─" FontSize="12" Foreground="{DynamicResource TitleBarTextBrush}"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,-2,0,0"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource SurfaceHoverBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        
                        <!-- Maximize/Restore -->
                        <Button Click="MaximizeButton_Click" ToolTip="Maximize"
                                Width="36" Height="28" Background="Transparent" BorderThickness="0" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="{DynamicResource XSmallCornerRadius}">
                                        <TextBlock x:Name="MaxIcon" Text="□" FontSize="12" Foreground="{DynamicResource TitleBarTextBrush}"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="{DynamicResource SurfaceHoverBrush}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                        
                        <!-- Close -->
                        <Button Click="CloseButton_Click" ToolTip="Close"
                                Width="36" Height="28" Background="Transparent" BorderThickness="0" Cursor="Hand">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="{DynamicResource XSmallCornerRadius}">
                                        <TextBlock Text="✕" FontSize="11" Foreground="{DynamicResource TitleBarTextBrush}"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="Bd" Property="Background" Value="#dc2626"/>
                                            <Setter TargetName="Bd" Property="TextBlock.Foreground" Value="White"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Main Content Area -->
            <Grid Grid.Row="1">
        <!-- Launcher View -->
        <Grid x:Name="LauncherPanel"
              Visibility="{Binding NavigationService.CurrentView, Converter={StaticResource NullToVisibility}, ConverterParameter=Invert}">
            
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="340"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Sidebar - App Selection -->
            <Border Grid.Column="0" Background="{DynamicResource SidebarBackgroundBrush}" CornerRadius="{DynamicResource SidebarCornerRadius}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Logo & Branding -->
                    <StackPanel Grid.Row="0" Margin="24,32,24,24">
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                            <Border Width="56" Height="56" CornerRadius="{DynamicResource AppLogoCornerRadius}"
                                Background="{DynamicResource AppLogoGradient}">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.4" Color="{DynamicResource AppLogoShadowColor}"/>
                                </Border.Effect>
                                <TextBlock Text="{DynamicResource AppLogoIcon}" FontSize="26" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White"/>
                            </Border>
                            <StackPanel VerticalAlignment="Center" Margin="14,0,0,0">
                                <TextBlock Text="S.A.P" FontSize="28" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                <TextBlock Text="S.A.M. Add-on Pack" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"/>
                            </StackPanel>
                        </StackPanel>
                        
                        <!-- Version Badge -->
                        <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="{DynamicResource SmallCornerRadius}" Padding="12,8" HorizontalAlignment="Left">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse Width="8" Height="8" Margin="0,0,8,0" Fill="{DynamicResource StatusOnlineBrush}"/>
                                <TextBlock Text="{x:Static core:AppVersion.DisplayVersion}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                                <TextBlock Text="  •  " Foreground="{DynamicResource TextDisabledBrush}" FontSize="12"/>
                                <TextBlock Text="{x:Static core:AppVersion.Channel}" Foreground="{DynamicResource StatusOnlineBrush}" FontSize="12" FontWeight="Medium"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- App Selection List -->
                    <StackPanel Grid.Row="1" Margin="0,8,0,0">
                        <TextBlock Text="APPLICATIONS" FontSize="10" FontWeight="Bold" Foreground="{DynamicResource TextDisabledBrush}" 
                                   Margin="24,0,0,12"/>

                            <!-- ExpireWise -->
                            <RadioButton x:Name="NavExpireWise" GroupName="AppNav" Style="{DynamicResource AppNavButtonStyle}"
                                         IsChecked="True"
                                         Visibility="{Binding LauncherViewModel.IsExpireWiseEnabled, Converter={StaticResource BoolToVisibility}}">
                                <RadioButton.Tag>
                                    <TextBlock Text="{DynamicResource ExpireWiseIcon}" FontSize="20"/>
                                </RadioButton.Tag>
                                <StackPanel>
                                    <TextBlock Text="ExpireWise" FontSize="14" FontWeight="SemiBold"/>
                                    <TextBlock Text="Expiry tracking" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"/>
                                </StackPanel>
                            </RadioButton>

                            <!-- Allocation Buddy -->
                            <RadioButton x:Name="NavAllocationBuddy" GroupName="AppNav" Style="{DynamicResource AppNavButtonStyle}"
                                         Visibility="{Binding LauncherViewModel.IsAllocationBuddyEnabled, Converter={StaticResource BoolToVisibility}}">
                                <RadioButton.Tag>
                                    <TextBlock Text="{DynamicResource AllocationBuddyIcon}" FontSize="20"/>
                                </RadioButton.Tag>
                                <StackPanel>
                                    <TextBlock Text="Allocation Buddy" FontSize="14" FontWeight="SemiBold"/>
                                    <TextBlock Text="Store allocations" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"/>
                                </StackPanel>
                            </RadioButton>

                            <!-- Essentials Buddy -->
                            <RadioButton x:Name="NavEssentialsBuddy" GroupName="AppNav" Style="{DynamicResource AppNavButtonStyle}"
                                         Visibility="{Binding LauncherViewModel.IsEssentialsBuddyEnabled, Converter={StaticResource BoolToVisibility}}">
                                <RadioButton.Tag>
                                    <TextBlock Text="{DynamicResource EssentialsBuddyIcon}" FontSize="20"/>
                                </RadioButton.Tag>
                                <StackPanel>
                                    <TextBlock Text="Essentials Buddy" FontSize="14" FontWeight="SemiBold"/>
                                    <TextBlock Text="Inventory tracking" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"/>
                                </StackPanel>
                            </RadioButton>

                            <!-- Swift Label -->
                            <RadioButton x:Name="NavSwiftLabel" GroupName="AppNav" Style="{DynamicResource AppNavButtonStyle}">
                                <RadioButton.Tag>
                                    <TextBlock Text="{DynamicResource SwiftLabelIcon}" FontSize="20"/>
                                </RadioButton.Tag>
                                <StackPanel>
                                    <TextBlock Text="Swift Label" FontSize="14" FontWeight="SemiBold"/>
                                    <TextBlock Text="Label generator" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"/>
                                </StackPanel>
                            </RadioButton>

                            <!-- Notes Tracker -->
                            <RadioButton x:Name="NavNotesTracker" GroupName="AppNav" Style="{DynamicResource AppNavButtonStyle}">
                                <RadioButton.Tag>
                                    <TextBlock Text="{DynamicResource NotesIcon}" FontSize="20"/>
                                </RadioButton.Tag>
                                <StackPanel>
                                    <TextBlock Text="Notes" FontSize="14" FontWeight="SemiBold"/>
                                    <TextBlock Text="Track transfers &amp; shipments" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"/>
                                </StackPanel>
                            </RadioButton>
                    </StackPanel>

                    <!-- Bottom Actions -->
                    <StackPanel Grid.Row="2" Margin="12,0,12,20">
                        <Separator Background="{DynamicResource SurfaceHoverBrush}" Margin="12,0,12,16"/>
                        
                        <!-- Theme Toggle -->
                        <Button Command="{Binding ToggleThemeCommand}" Style="{DynamicResource QuickActionStyle}" Margin="0,0,0,8"
                                ToolTip="Toggle Light/Dark Mode">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock FontSize="16" Margin="0,0,12,0">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Text" Value="🌙"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsDarkMode}" Value="False">
                                                    <Setter Property="Text" Value="☀️"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                                <TextBlock FontSize="14" FontWeight="Medium" VerticalAlignment="Center">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Text" Value="Dark Mode"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsDarkMode}" Value="False">
                                                    <Setter Property="Text" Value="Light Mode"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                        </Button>
                        
                        <Button Command="{Binding OpenSettingsCommand}" Style="{DynamicResource QuickActionStyle}" Margin="0,0,0,8">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="⚙️" FontSize="16" Margin="0,0,12,0"/>
                                <TextBlock Text="Settings" FontSize="14" FontWeight="Medium" VerticalAlignment="Center"/>
                            </StackPanel>
                        </Button>

                        <!-- Keyboard Shortcuts Help -->
                        <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="12,10" Margin="0,12,0,0">
                            <StackPanel>
                                <TextBlock Text="SHORTCUTS" FontSize="9" FontWeight="Bold" 
                                           Foreground="{DynamicResource TextDisabledBrush}" Margin="0,0,0,8"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                        <RowDefinition/>
                                    </Grid.RowDefinitions>
                                    
                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Alt+1-4" FontSize="10" FontWeight="SemiBold" 
                                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,12,4"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="Launch module" FontSize="10" 
                                               Foreground="{DynamicResource TextTertiaryBrush}" Margin="0,0,0,4"/>
                                    
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Ctrl+T" FontSize="10" FontWeight="SemiBold" 
                                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,12,4"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="Toggle theme" FontSize="10" 
                                               Foreground="{DynamicResource TextTertiaryBrush}" Margin="0,0,0,4"/>
                                    
                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Esc" FontSize="10" FontWeight="SemiBold" 
                                               Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,12,0"/>
                                    <TextBlock Grid.Row="2" Grid.Column="1" Text="Return to home" FontSize="10" 
                                               Foreground="{DynamicResource TextTertiaryBrush}"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Right Side - Splash Screen -->
            <Grid Grid.Column="1">
                <!-- ExpireWise Splash -->
                <Grid Visibility="{Binding IsChecked, ElementName=NavExpireWise, Converter={StaticResource BoolToVisibility}}"
                      Background="{DynamicResource ExpireWiseSplashGradient}">
                    
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" MaxWidth="500">
                        <Border Width="120" Height="120" CornerRadius="{DynamicResource SplashIconCornerRadius}" HorizontalAlignment="Center" Margin="0,0,0,32"
                                Background="{DynamicResource ExpireWiseIconGradient}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.6" Color="{DynamicResource ExpireWiseIconShadowColor}"/>
                            </Border.Effect>
                            <TextBlock Text="{DynamicResource ExpireWiseSplashIcon}" FontSize="56" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Text="ExpireWise" FontSize="42" FontWeight="Bold" Foreground="{DynamicResource SplashTitleBrush}"
                                   HorizontalAlignment="Center" Margin="0,0,0,12"/>
                        
                        <TextBlock Text="Track product expiration dates and manage inventory lifecycle" 
                                   FontSize="16" Foreground="{DynamicResource TextSecondaryBrush}" TextAlignment="Center" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" Margin="0,0,0,24"/>
                        
                        <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,40">
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="📅 Expiry Tracking" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="📊 Analytics" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="🔔 Smart Alerts" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                        </WrapPanel>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Command="{Binding LauncherViewModel.LaunchExpireWiseCommand}" 
                                    Style="{DynamicResource LaunchButtonStyle}"/>
                            <Button Command="{Binding LauncherViewModel.PopOutExpireWiseCommand}"
                                    Style="{DynamicResource PopOutButtonStyle}" Margin="12,0,0,0"
                                    ToolTip="Open in new window"/>
                        </StackPanel>
                        
                        <TextBlock Text="Press Alt+1 for quick launch" FontSize="12" Foreground="{DynamicResource TextDisabledBrush}" 
                                   HorizontalAlignment="Center" Margin="0,20,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Allocation Buddy Splash -->
                <Grid Visibility="{Binding IsChecked, ElementName=NavAllocationBuddy, Converter={StaticResource BoolToVisibility}}"
                      Background="{DynamicResource AllocationBuddySplashGradient}">
                    
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" MaxWidth="500">
                        <Border Width="120" Height="120" CornerRadius="{DynamicResource SplashIconCornerRadius}" HorizontalAlignment="Center" Margin="0,0,0,32"
                                Background="{DynamicResource AllocationBuddyIconGradient}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.6" Color="{DynamicResource AllocationBuddyIconShadowColor}"/>
                            </Border.Effect>
                            <TextBlock Text="{DynamicResource AllocationBuddySplashIcon}" FontSize="56" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Text="Allocation Buddy" FontSize="42" FontWeight="Bold" Foreground="{DynamicResource SplashTitleBrush}"
                                   HorizontalAlignment="Center" Margin="0,0,0,12"/>
                        
                        <TextBlock Text="Smart inventory allocation and store distribution management" 
                                   FontSize="16" Foreground="{DynamicResource TextSecondaryBrush}" TextAlignment="Center" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" Margin="0,0,0,24"/>
                        
                        <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,40">
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="🏪 Multi-Store" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="📋 BC Ready" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="📥 Excel Import" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                        </WrapPanel>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Command="{Binding LauncherViewModel.LaunchAllocationBuddyCommand}" 
                                    Style="{DynamicResource LaunchButtonStyle}"/>
                            <Button Command="{Binding LauncherViewModel.PopOutAllocationBuddyCommand}"
                                    Style="{DynamicResource PopOutButtonStyle}" Margin="12,0,0,0"
                                    ToolTip="Open in new window"/>
                        </StackPanel>
                        
                        <TextBlock Text="Press Alt+2 for quick launch" FontSize="12" Foreground="{DynamicResource TextDisabledBrush}" 
                                   HorizontalAlignment="Center" Margin="0,20,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Essentials Buddy Splash -->
                <Grid Visibility="{Binding IsChecked, ElementName=NavEssentialsBuddy, Converter={StaticResource BoolToVisibility}}"
                      Background="{DynamicResource EssentialsBuddySplashGradient}">
                    
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" MaxWidth="500">
                        <Border Width="120" Height="120" CornerRadius="{DynamicResource SplashIconCornerRadius}" HorizontalAlignment="Center" Margin="0,0,0,32"
                                Background="{DynamicResource EssentialsBuddyIconGradient}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.6" Color="{DynamicResource EssentialsBuddyIconShadowColor}"/>
                            </Border.Effect>
                            <TextBlock Text="{DynamicResource EssentialsBuddySplashIcon}" FontSize="56" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Text="Essentials Buddy" FontSize="42" FontWeight="Bold" Foreground="{DynamicResource SplashTitleBrush}"
                                   HorizontalAlignment="Center" Margin="0,0,0,12"/>
                        
                        <TextBlock Text="Monitor essential inventory levels and track stock status" 
                                   FontSize="16" Foreground="{DynamicResource TextSecondaryBrush}" TextAlignment="Center" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" Margin="0,0,0,24"/>
                        
                        <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,40">
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="⭐ Essential Tracking" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="🎨 Status Colors" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="⚠️ Misplaced Alerts" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                        </WrapPanel>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Command="{Binding LauncherViewModel.LaunchEssentialsBuddyCommand}" 
                                    Style="{DynamicResource LaunchButtonStyle}"/>
                            <Button Command="{Binding LauncherViewModel.PopOutEssentialsBuddyCommand}"
                                    Style="{DynamicResource PopOutButtonStyle}" Margin="12,0,0,0"
                                    ToolTip="Open in new window"/>
                        </StackPanel>
                        
                        <TextBlock Text="Press Alt+3 for quick launch" FontSize="12" Foreground="{DynamicResource TextDisabledBrush}" 
                                   HorizontalAlignment="Center" Margin="0,20,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Swift Label Splash -->
                <Grid Visibility="{Binding IsChecked, ElementName=NavSwiftLabel, Converter={StaticResource BoolToVisibility}}"
                      Background="{DynamicResource SwiftLabelSplashGradient}">
                    
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" MaxWidth="500">
                        <Border Width="120" Height="120" CornerRadius="{DynamicResource SplashIconCornerRadius}" HorizontalAlignment="Center" Margin="0,0,0,32"
                                Background="{DynamicResource SwiftLabelIconGradient}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.6" Color="{DynamicResource SwiftLabelIconShadowColor}"/>
                            </Border.Effect>
                            <TextBlock Text="{DynamicResource SwiftLabelSplashIcon}" FontSize="56" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>

                        <TextBlock Text="Swift Label" FontSize="42" FontWeight="Bold" Foreground="{DynamicResource SplashTitleBrush}"
                                   HorizontalAlignment="Center" Margin="0,0,0,12"/>
                        
                        <TextBlock Text="Generate transfer order box labels quickly and easily" 
                                   FontSize="16" Foreground="{DynamicResource TextSecondaryBrush}" TextAlignment="Center" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" Margin="0,0,0,24"/>
                        
                        <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,40">
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="🖨️ Quick Print" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="📦 Box Labels" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="🏪 Store Info" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                        </WrapPanel>
                        
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Command="{Binding LauncherViewModel.LaunchSwiftLabelCommand}" 
                                    Style="{DynamicResource LaunchButtonStyle}"/>
                            <Button Command="{Binding LauncherViewModel.PopOutSwiftLabelCommand}"
                                    Style="{DynamicResource PopOutButtonStyle}" Margin="12,0,0,0"
                                    ToolTip="Open in new window"/>
                        </StackPanel>
                        
                        <TextBlock Text="Press Alt+4 for quick launch" FontSize="12" Foreground="{DynamicResource TextDisabledBrush}" 
                                   HorizontalAlignment="Center" Margin="0,20,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Notes Tracker Splash -->
                <Grid Visibility="{Binding IsChecked, ElementName=NavNotesTracker, Converter={StaticResource BoolToVisibility}}"
                      Background="{DynamicResource NotesSplashGradient}">
                    
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" MaxWidth="500">
                        <!-- Large Icon -->
                        <Border Width="120" Height="120" CornerRadius="{DynamicResource SplashIconCornerRadius}" HorizontalAlignment="Center" Margin="0,0,0,32"
                                Background="{DynamicResource NotesIconGradient}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="50" ShadowDepth="0" Opacity="0.6" Color="{DynamicResource NotesIconShadowColor}"/>
                            </Border.Effect>
                            <TextBlock Text="{DynamicResource NotesSplashIcon}" FontSize="56" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        
                        <!-- Title -->
                        <TextBlock Text="Notes Tracker" FontSize="42" FontWeight="Bold" Foreground="{DynamicResource SplashTitleBrush}"
                                   HorizontalAlignment="Center" Margin="0,0,0,12"/>
                        
                        <!-- Subtitle -->
                        <TextBlock Text="Track transfer groups, mark notes complete, and colour-code entries" 
                                   FontSize="16" Foreground="{DynamicResource TextSecondaryBrush}" TextAlignment="Center" TextWrapping="Wrap"
                                   HorizontalAlignment="Center" Margin="0,0,0,24"/>
                        
                        <!-- Features -->
                        <WrapPanel HorizontalAlignment="Center" Margin="0,0,0,40">
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="📋 Transfer Groups" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="🎨 Colour Coding" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                            <Border Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,8" Margin="4">
                                <TextBlock Text="✅ Status Tracking" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" FontWeight="Medium"/>
                            </Border>
                        </WrapPanel>
                        
                        <!-- Launch Buttons -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <Button Command="{Binding LauncherViewModel.LaunchNotesTrackerCommand}" 
                                    Style="{DynamicResource LaunchButtonStyle}"/>
                            <Button Command="{Binding LauncherViewModel.LaunchNotesWidgetCommand}"
                                    Style="{DynamicResource PopOutButtonStyle}" Margin="12,0,0,0"
                                    ToolTip="Open sidebar widget"/>
                        </StackPanel>
                        
                        <!-- Keyboard shortcut hint -->
                        <TextBlock Text="Press Alt+5 for quick launch" FontSize="12" Foreground="{DynamicResource TextDisabledBrush}" 
                                   HorizontalAlignment="Center" Margin="0,20,0,0"/>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>

        <!-- Module View (shown when a module is active) -->
        <Grid Visibility="{Binding NavigationService.CurrentView, Converter={StaticResource NullToVisibility}}"
              Background="{DynamicResource BackgroundBrush}">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Top Navigation Bar -->
            <Border Grid.Row="0" Background="{DynamicResource SurfaceBrush}" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1" Padding="20,14">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Back Button -->
                    <Button Grid.Column="0" HorizontalAlignment="Left"
                            Command="{Binding NavigationService.NavigateBackCommand}"
                            Cursor="Hand" Background="Transparent" BorderThickness="0">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="Border" Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="14,10">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="←" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center" Foreground="{DynamicResource TextSecondaryBrush}"/>
                                        <TextBlock Text="Back to Launcher" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center" Foreground="{DynamicResource TextPrimaryBrush}"/>
                                    </StackPanel>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource SurfaceActiveBrush}"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource BorderDarkBrush}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                    
                    <!-- Theme Toggle Button -->
                    <Button Grid.Column="2" HorizontalAlignment="Right"
                            Command="{Binding ToggleThemeCommand}"
                            Cursor="Hand" Background="Transparent" BorderThickness="0"
                            ToolTip="Toggle Light/Dark Mode">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="Border" Background="{DynamicResource SurfaceHoverBrush}" CornerRadius="{DynamicResource BadgeCornerRadius}" Padding="12,10">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock x:Name="ThemeIcon" Text="🌙" FontSize="16" VerticalAlignment="Center"/>
                                        <TextBlock x:Name="ThemeText" Text="Dark" FontSize="13" FontWeight="Medium"
                                                   VerticalAlignment="Center" Margin="8,0,0,0"
                                                   Foreground="{DynamicResource TextSecondaryBrush}"/>
                                    </StackPanel>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="Border" Property="Background" Value="{DynamicResource SurfaceActiveBrush}"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsDarkMode}" Value="False">
                                        <Setter Property="Content">
                                            <Setter.Value>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="☀️" FontSize="16"/>
                                                    <TextBlock Text="Light" FontSize="13" FontWeight="Medium" Margin="8,0,0,0"/>
                                                </StackPanel>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>

            <!-- Module Content -->
            <ContentControl Grid.Row="1"
                            Content="{Binding NavigationService.CurrentView, Converter={StaticResource ViewModelToView}}"
                            behaviors:ContentTransitionBehavior.EnableTransition="True"
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"/>
        </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>

