<UserControl x:Class="SOUP.Features.ExpireWise.Views.HeatmapCalendar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="500" d:DesignWidth="900">

    <UserControl.Resources>
        <!-- ExpireWise Amber Colors -->
        <Color x:Key="ExpireWiseAccentColor">#f59e0b</Color>
        <SolidColorBrush x:Key="ExpireWiseAccentBrush" Color="{StaticResource ExpireWiseAccentColor}"/>

        <!-- Heatmap Cell Style -->
        <Style x:Key="HeatmapCellStyle" TargetType="Border">
            <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                               To="1.08" Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                               To="1.08" Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                               To="1" Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                                <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                               To="1" Duration="0:0:0.15">
                                    <DoubleAnimation.EasingFunction>
                                        <QuadraticEase EasingMode="EaseOut"/>
                                    </DoubleAnimation.EasingFunction>
                                </DoubleAnimation>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                    <Setter Property="BorderBrush" Value="{StaticResource ExpireWiseAccentBrush}"/>
                    <Setter Property="Effect">
                        <Setter.Value>
                            <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.2"
                                            Color="{StaticResource ExpireWiseAccentColor}"/>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Day of Week Header Style -->
        <Style x:Key="DayHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextSecondaryBrush}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
    </UserControl.Resources>

    <Border Background="{DynamicResource SurfaceBrush}" CornerRadius="12"
            Padding="24" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="16" ShadowDepth="2" Opacity="0.1" Color="Black"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Month Navigation -->
            <Grid Grid.Row="0" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Previous Month Button -->
                <Button Grid.Column="0" Content="❮" FontSize="18" Padding="12,8"
                    Background="{DynamicResource SurfaceHoverBrush}"
                    BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                    Cursor="Hand" ToolTip="Previous Month"/>

                <!-- Current Month/Year -->
                <StackPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="January 2026" FontSize="20" FontWeight="Bold"
                               Foreground="{DynamicResource TextPrimaryBrush}" HorizontalAlignment="Center"/>
                    <TextBlock Text="Expiration heatmap for the selected month" FontSize="11"
                               Foreground="{DynamicResource TextTertiaryBrush}" HorizontalAlignment="Center"
                               Margin="0,4,0,0"/>
                </StackPanel>

                <!-- Next Month Button -->
                <Button Grid.Column="2" Content="❯" FontSize="18" Padding="12,8"
                    Background="{DynamicResource SurfaceHoverBrush}"
                    BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1"
                    Cursor="Hand" ToolTip="Next Month"/>
            </Grid>

            <!-- Day of Week Headers -->
            <UniformGrid Grid.Row="1" Columns="7" Rows="1" Margin="0,0,0,4">
                <TextBlock Text="Sun" Style="{StaticResource DayHeaderStyle}"/>
                <TextBlock Text="Mon" Style="{StaticResource DayHeaderStyle}"/>
                <TextBlock Text="Tue" Style="{StaticResource DayHeaderStyle}"/>
                <TextBlock Text="Wed" Style="{StaticResource DayHeaderStyle}"/>
                <TextBlock Text="Thu" Style="{StaticResource DayHeaderStyle}"/>
                <TextBlock Text="Fri" Style="{StaticResource DayHeaderStyle}"/>
                <TextBlock Text="Sat" Style="{StaticResource DayHeaderStyle}"/>
            </UniformGrid>

            <!-- Calendar Grid (7 columns x 6 rows for days) -->
            <UniformGrid Grid.Row="2" Columns="7" Rows="6">
                <!-- Sample cells - these would be data-bound in real implementation -->

                <!-- Week 1 (with empty leading cells) -->
                <Border Style="{StaticResource HeatmapCellStyle}" Background="Transparent" BorderBrush="Transparent"/>
                <Border Style="{StaticResource HeatmapCellStyle}" Background="Transparent" BorderBrush="Transparent"/>
                <Border Style="{StaticResource HeatmapCellStyle}" Background="Transparent" BorderBrush="Transparent"/>

                <!-- Day 1 - Low activity -->
                <Border Style="{StaticResource HeatmapCellStyle}" ToolTip="Jan 1 - 2 items expiring">
                    <Border.Background>
                        <SolidColorBrush Color="#fef3c7" Opacity="0.3"/>
                    </Border.Background>
                    <Grid>
                        <TextBlock Text="1" FontSize="14" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="6,4"/>
                        <Border Background="{StaticResource ExpireWiseAccentBrush}" CornerRadius="8"
                                Padding="4,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="2" FontSize="11" FontWeight="Bold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Day 2 - Medium activity -->
                <Border Style="{StaticResource HeatmapCellStyle}" ToolTip="Jan 2 - 8 items expiring">
                    <Border.Background>
                        <SolidColorBrush Color="#fbbf24" Opacity="0.5"/>
                    </Border.Background>
                    <Grid>
                        <TextBlock Text="2" FontSize="14" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="6,4"/>
                        <Border Background="{StaticResource ExpireWiseAccentBrush}" CornerRadius="8"
                                Padding="4,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="8" FontSize="11" FontWeight="Bold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Day 3 - High activity -->
                <Border Style="{StaticResource HeatmapCellStyle}" ToolTip="Jan 3 - 15 items expiring">
                    <Border.Background>
                        <SolidColorBrush Color="#f59e0b" Opacity="0.7"/>
                    </Border.Background>
                    <Grid>
                        <TextBlock Text="3" FontSize="14" FontWeight="SemiBold"
                                   Foreground="White"
                                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="6,4"/>
                        <Border Background="#d97706" CornerRadius="8"
                                Padding="4,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="15" FontSize="11" FontWeight="Bold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Day 4 - Very high activity -->
                <Border Style="{StaticResource HeatmapCellStyle}" ToolTip="Jan 4 - 23 items expiring">
                    <Border.Background>
                        <SolidColorBrush Color="#d97706" Opacity="0.9"/>
                    </Border.Background>
                    <Grid>
                        <TextBlock Text="4" FontSize="14" FontWeight="SemiBold"
                                   Foreground="White"
                                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="6,4"/>
                        <Border Background="#b45309" CornerRadius="8"
                                Padding="4,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="23" FontSize="11" FontWeight="Bold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Remaining cells (sample pattern continues) -->
                <Border Style="{StaticResource HeatmapCellStyle}" ToolTip="Jan 5 - 5 items expiring">
                    <Border.Background>
                        <SolidColorBrush Color="#fbbf24" Opacity="0.4"/>
                    </Border.Background>
                    <Grid>
                        <TextBlock Text="5" FontSize="14" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="6,4"/>
                        <Border Background="{StaticResource ExpireWiseAccentBrush}" CornerRadius="8"
                                Padding="4,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="5" FontSize="11" FontWeight="Bold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Continue pattern for remaining days (Week 2-6) -->
                <!-- For brevity, showing a few more examples -->
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Border.Background>
                        <SolidColorBrush Color="#fef3c7" Opacity="0.2"/>
                    </Border.Background>
                    <Grid>
                        <TextBlock Text="6" FontSize="14" FontWeight="SemiBold"
                                   Foreground="{DynamicResource TextPrimaryBrush}"
                                   HorizontalAlignment="Left" VerticalAlignment="Top" Margin="6,4"/>
                        <Border Background="{StaticResource ExpireWiseAccentBrush}" CornerRadius="8"
                                Padding="4,2" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="1" FontSize="11" FontWeight="Bold" Foreground="White"/>
                        </Border>
                    </Grid>
                </Border>

                <!-- Additional days 7-31 would follow the same pattern -->
                <!-- For a complete implementation, these would be data-bound to a collection -->
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="7" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="8" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="9" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="10" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="11" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="12" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="13" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>

                <!-- Week 3 -->
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="14" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="15" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="16" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="17" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="18" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="19" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="20" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>

                <!-- Week 4 -->
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="21" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="22" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="23" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="24" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="25" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="26" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="27" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>

                <!-- Week 5 -->
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="28" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="29" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="30" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>
                <Border Style="{StaticResource HeatmapCellStyle}">
                    <Grid><TextBlock Text="31" FontSize="14" Foreground="{DynamicResource TextPrimaryBrush}" Margin="6,4"/></Grid>
                </Border>

                <!-- Empty trailing cells -->
                <Border Style="{StaticResource HeatmapCellStyle}" Background="Transparent" BorderBrush="Transparent"/>
                <Border Style="{StaticResource HeatmapCellStyle}" Background="Transparent" BorderBrush="Transparent"/>
                <Border Style="{StaticResource HeatmapCellStyle}" Background="Transparent" BorderBrush="Transparent"/>
            </UniformGrid>

            <!-- Legend -->
            <Grid Grid.Row="3" Margin="0,16,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="Intensity:" FontSize="12" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextSecondaryBrush}" VerticalAlignment="Center"
                           Margin="0,0,12,0"/>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Left">
                    <Border Width="32" Height="16" CornerRadius="3" Margin="4,0">
                        <Border.Background>
                            <SolidColorBrush Color="#fef3c7" Opacity="0.2"/>
                        </Border.Background>
                    </Border>
                    <Border Width="32" Height="16" CornerRadius="3" Margin="4,0">
                        <Border.Background>
                            <SolidColorBrush Color="#fbbf24" Opacity="0.4"/>
                        </Border.Background>
                    </Border>
                    <Border Width="32" Height="16" CornerRadius="3" Margin="4,0">
                        <Border.Background>
                            <SolidColorBrush Color="#f59e0b" Opacity="0.6"/>
                        </Border.Background>
                    </Border>
                    <Border Width="32" Height="16" CornerRadius="3" Margin="4,0">
                        <Border.Background>
                            <SolidColorBrush Color="#d97706" Opacity="0.8"/>
                        </Border.Background>
                    </Border>
                    <Border Width="32" Height="16" CornerRadius="3" Margin="4,0">
                        <Border.Background>
                            <SolidColorBrush Color="#b45309"/>
                        </Border.Background>
                    </Border>
                    <TextBlock Text="Low → High" FontSize="11" Foreground="{DynamicResource TextTertiaryBrush}"
                               VerticalAlignment="Center" Margin="12,0,0,0"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</UserControl>
