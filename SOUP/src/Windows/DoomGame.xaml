<Window x:Class="SOUP.Windows.DoomGame"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="S.O.U.P NUKEM - Level 1" Width="800" Height="600"
        WindowStartupLocation="CenterScreen" Background="Black"
        KeyDown="OnKeyDown" KeyUp="OnKeyUp" MouseMove="OnMouseMove"
        MouseDown="OnMouseDown" MouseUp="OnMouseUp" Loaded="OnLoaded" Closing="OnClosing"
        Focusable="True">
    <Grid>
        <Image x:Name="Screen" Stretch="Fill" RenderOptions.BitmapScalingMode="NearestNeighbor"/>
        <Canvas x:Name="UI">
            <!-- Minimap -->
            <Border x:Name="MinimapBorder" Canvas.Right="10" Canvas.Top="10"
                    Background="#88000000" BorderBrush="#666" BorderThickness="2" CornerRadius="4">
                <Image x:Name="Minimap" Width="120" Height="120" RenderOptions.BitmapScalingMode="NearestNeighbor"/>
            </Border>

            <!-- Crosshair -->
            <Canvas x:Name="CrosshairCanvas" Canvas.Left="388" Canvas.Top="278">
                <Ellipse Width="8" Height="8" Stroke="Lime" StrokeThickness="2" Canvas.Left="-4" Canvas.Top="-4"/>
                <Line X1="-12" Y1="0" X2="-6" Y2="0" Stroke="Lime" StrokeThickness="2"/>
                <Line X1="6" Y1="0" X2="12" Y2="0" Stroke="Lime" StrokeThickness="2"/>
                <Line X1="0" Y1="-12" X2="0" Y2="-6" Stroke="Lime" StrokeThickness="2"/>
                <Line X1="0" Y1="6" X2="0" Y2="12" Stroke="Lime" StrokeThickness="2"/>
            </Canvas>

            <!-- Hit Marker (center) -->
            <Canvas x:Name="HitMarkerCanvas" Canvas.Left="392" Canvas.Top="292" IsHitTestVisible="False">
                <Ellipse Width="16" Height="16" Fill="Transparent" Stroke="#FF4444" StrokeThickness="2" Opacity="0" x:Name="HitMarkerEllipse"/>
            </Canvas>

            <!-- Duke Quote -->
            <TextBlock x:Name="DukeQuote" Canvas.Left="200" Canvas.Top="100"
                       Foreground="#FFD700" FontSize="20" FontFamily="Impact" FontWeight="Bold">
                <TextBlock.Effect>
                    <DropShadowEffect ShadowDepth="2" Color="Black" BlurRadius="3"/>
                </TextBlock.Effect>
            </TextBlock>

            <!-- HUD Bar - Duke Style -->
            <Border Canvas.Left="0" Canvas.Bottom="0" Width="800" Height="90" Background="#EE111111">
                <Border.BorderBrush>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#555" Offset="0"/>
                        <GradientStop Color="#222" Offset="1"/>
                    </LinearGradientBrush>
                </Border.BorderBrush>
                <Border.BorderThickness>
                    <Thickness Top="3"/>
                </Border.BorderThickness>
                <Grid Margin="15,8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>

                    <!-- Health -->
                    <StackPanel Grid.Column="0" VerticalAlignment="Center">
                        <TextBlock Text="HEALTH" Foreground="#888" FontSize="10" FontFamily="Consolas" FontWeight="Bold"/>
                        <Grid>
                            <Border Width="180" Height="24" Background="#222" CornerRadius="3" BorderBrush="#444" BorderThickness="1"/>
                            <Border x:Name="HealthBar" Background="#e53935" CornerRadius="3" HorizontalAlignment="Left" Height="22" Margin="1"/>
                            <TextBlock x:Name="HealthText" Text="100" Foreground="White" FontSize="16" FontFamily="Impact"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock Text="ARMOR:" Foreground="#888" FontSize="10" FontFamily="Consolas"/>
                            <TextBlock x:Name="ArmorText" Text="0" Foreground="#4fc3f7" FontSize="12" FontFamily="Impact" Margin="5,0,0,0"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Duke Face -->
                    <Border Grid.Column="2" Width="80" Height="80" Background="#222" CornerRadius="6"
                            BorderBrush="#ffd700" BorderThickness="2" VerticalAlignment="Center">
                        <Grid>
                            <TextBlock x:Name="DukeFace" Text="ðŸ˜Ž" FontSize="48" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Grid>
                    </Border>

                    <!-- Weapon/Ammo -->
                    <StackPanel Grid.Column="4" VerticalAlignment="Center" HorizontalAlignment="Right">
                        <TextBlock x:Name="WeaponName" Text="PISTOL" Foreground="#ffd700" FontSize="14" FontFamily="Impact" FontWeight="Bold"/>
                        <StackPanel Orientation="Horizontal" Margin="0,2,0,0">
                            <TextBlock Text="AMMO:" Foreground="#888" FontSize="10" FontFamily="Consolas"/>
                            <TextBlock x:Name="AmmoText" Text="48" Foreground="White" FontSize="20" FontFamily="Impact" Margin="8,0,0,0"/>
                            <TextBlock x:Name="FilmText" Text="ðŸ“· 24" Foreground="#FFD700" FontSize="12" FontFamily="Segoe UI" Margin="12,4,0,0" ToolTip="Camera Film (Middle Click)"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                            <TextBlock Text="KEYS:" Foreground="#888" FontSize="9" FontFamily="Consolas" Margin="0,0,5,0"/>
                            <Border x:Name="RedKeyIcon" Width="16" Height="16" CornerRadius="2" Margin="2,0" Opacity="0.3">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#ff4444" Offset="0"/>
                                        <GradientStop Color="#aa0000" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                            </Border>
                            <Border x:Name="BlueKeyIcon" Width="16" Height="16" CornerRadius="2" Margin="2,0" Opacity="0.3">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#4444ff" Offset="0"/>
                                        <GradientStop Color="#0000aa" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                            </Border>
                            <Border x:Name="YellowKeyIcon" Width="16" Height="16" CornerRadius="2" Margin="2,0" Opacity="0.3">
                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Color="#ffff44" Offset="0"/>
                                        <GradientStop Color="#aaaa00" Offset="1"/>
                                    </LinearGradientBrush>
                                </Border.Background>
                            </Border>
                        </StackPanel>
                    </StackPanel>

                    <!-- Inventory Bar -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,5">
                        <Border x:Name="JetpackIcon" Width="32" Height="32" CornerRadius="4" Background="#333" Margin="3,0" ToolTip="Jetpack [J]">
                            <TextBlock Text="ðŸš€" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <Border x:Name="MedkitIcon" Width="32" Height="32" CornerRadius="4" Background="#333" Margin="3,0" ToolTip="Medkit [M]">
                            <TextBlock Text="ðŸ’Š" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <Border x:Name="SteroidsIcon" Width="32" Height="32" CornerRadius="4" Background="#333" Margin="3,0" ToolTip="Steroids [R]">
                            <TextBlock Text="ðŸ’‰" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </StackPanel>

                    <!-- Score/Stats -->
                    <StackPanel Grid.Column="3" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,5">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="SCORE:" Foreground="#888" FontSize="10" FontFamily="Consolas"/>
                            <TextBlock x:Name="ScoreText" Text="0" Foreground="#4caf50" FontSize="14" FontFamily="Impact" Margin="5,0,0,0"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="KILLS:" Foreground="#888" FontSize="10" FontFamily="Consolas"/>
                            <TextBlock x:Name="KillsText" Text="0/0" Foreground="#ff9800" FontSize="12" FontFamily="Impact" Margin="5,0,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Jetpack Fuel Bar -->
            <Border x:Name="JetpackBar" Canvas.Left="10" Canvas.Top="50" Visibility="Collapsed" Background="#88000000" CornerRadius="4" Padding="5">
                <StackPanel>
                    <TextBlock Text="JETPACK" Foreground="#ffd700" FontSize="10" FontFamily="Consolas"/>
                    <Border Width="100" Height="8" Background="#333" CornerRadius="2">
                        <Border x:Name="JetpackFuel" Background="#ff9800" CornerRadius="2" HorizontalAlignment="Left"/>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Power-up Bars -->
            <Border x:Name="PowerUpPanel" Canvas.Left="10" Canvas.Top="85" Visibility="Collapsed" Background="#88000000" CornerRadius="4" Padding="5">
                <StackPanel>
                    <StackPanel x:Name="InvincibilityBar" Visibility="Collapsed">
                        <TextBlock Text="â­ INVINCIBLE" Foreground="#00ffff" FontSize="10" FontFamily="Consolas" FontWeight="Bold"/>
                        <Border Width="100" Height="6" Background="#333" CornerRadius="2">
                            <Border x:Name="InvincibilityFill" Background="#00ffff" CornerRadius="2" HorizontalAlignment="Left"/>
                        </Border>
                    </StackPanel>
                    <StackPanel x:Name="DamageBoostBar" Visibility="Collapsed" Margin="0,4,0,0">
                        <TextBlock Text="ðŸ’¥ DAMAGE x2" Foreground="#ff4444" FontSize="10" FontFamily="Consolas" FontWeight="Bold"/>
                        <Border Width="100" Height="6" Background="#333" CornerRadius="2">
                            <Border x:Name="DamageBoostFill" Background="#ff4444" CornerRadius="2" HorizontalAlignment="Left"/>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Kill Streak Display -->
            <Border x:Name="KillStreakPanel" Canvas.Left="350" Canvas.Top="80" Visibility="Collapsed" Background="#CC000000" CornerRadius="6" Padding="10,5">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock x:Name="KillStreakText" Text="KILLING SPREE!" Foreground="#ff4444" FontSize="18" FontFamily="Impact" 
                               HorizontalAlignment="Center" FontWeight="Bold">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="Red" BlurRadius="10" ShadowDepth="0"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    <TextBlock x:Name="KillStreakCount" Text="x3" Foreground="#ffd700" FontSize="24" FontFamily="Impact" 
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Crosshair (for aiming / ADS) -->
            <Canvas x:Name="AimCrosshairCanvas" Canvas.Left="390" Canvas.Top="290" Visibility="Collapsed">
                <Line X1="-10" Y1="0" X2="10" Y2="0" Stroke="#88ffffff" StrokeThickness="1"/>
                <Line X1="0" Y1="-10" X2="0" Y2="10" Stroke="#88ffffff" StrokeThickness="1"/>
                <Ellipse Canvas.Left="-3" Canvas.Top="-3" Width="6" Height="6" Stroke="#88ff0000" StrokeThickness="1"/>
            </Canvas>

            <!-- Messages -->
            <TextBlock x:Name="MessageText" Canvas.Left="20" Canvas.Top="20" Foreground="#ffd700" FontSize="16" FontFamily="Consolas" FontWeight="Bold"/>

            <!-- Game Over Screen -->
            <Border x:Name="GameOverScreen" Visibility="Collapsed" Background="#EE000000" Width="800" Height="600">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="OOPSIE WOOPSIE!" Foreground="#FF69B4" FontSize="72" FontWeight="Bold" HorizontalAlignment="Center" FontFamily="Impact"/>
                    <TextBlock Text="You did a fucky wucky! Time to take a break ðŸ˜…" Foreground="#888" FontSize="18" HorizontalAlignment="Center" FontFamily="Consolas" Margin="0,10"/>
                    <TextBlock x:Name="FinalScoreText" Foreground="White" FontSize="24" HorizontalAlignment="Center" Margin="0,20" FontFamily="Impact"/>
                    <TextBlock x:Name="TopScoresText" Foreground="#aaa" FontSize="16" HorizontalAlignment="Center" Margin="0,6" FontFamily="Consolas"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                        <TextBox x:Name="NameInput" Width="180" Height="28" Text="" ToolTip="Enter name"/>
                        <Button x:Name="SaveScoreButton" Content="Save Score" Width="120" Height="28" Margin="8,0,0,0"/>
                    </StackPanel>
                    <TextBlock Text="Press R to Try Again | ESC to Quit" Foreground="#666" FontSize="16" HorizontalAlignment="Center" FontFamily="Consolas"/>
                </StackPanel>
            </Border>

            <!-- Level Complete Screen -->
            <Border x:Name="LevelCompleteScreen" Visibility="Collapsed" Background="#EE000000" Width="800" Height="600">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="WOOHOO! ðŸŽ‰" Foreground="#ffd700" FontSize="56" FontWeight="Bold" HorizontalAlignment="Center" FontFamily="Impact"/>
                    <TextBlock x:Name="LevelQuote" Text="&quot;That was actually pretty fun!&quot;" Foreground="#4caf50" FontSize="20" HorizontalAlignment="Center" FontFamily="Georgia" FontStyle="Italic" Margin="0,10"/>
                    <TextBlock x:Name="LevelScoreText" Foreground="White" FontSize="24" HorizontalAlignment="Center" Margin="0,20" FontFamily="Consolas"/>
                    <TextBlock x:Name="LevelStatsText" Foreground="#aaa" FontSize="16" HorizontalAlignment="Center" FontFamily="Consolas"/>
                    <TextBlock Text="Press SPACE for More Fun!" Foreground="#ffd700" FontSize="18" HorizontalAlignment="Center" Margin="0,30,0,0" FontFamily="Impact"/>
                </StackPanel>
            </Border>

            <!-- Victory Screen -->
            <Border x:Name="VictoryScreen" Visibility="Collapsed" Background="#EE000000" Width="800" Height="600">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="YOU DID IT! ðŸ†" Foreground="#ffd700" FontSize="72" FontWeight="Bold" HorizontalAlignment="Center" FontFamily="Impact"/>
                    <TextBlock Text="&quot;Time to get back to those spreadsheets...&#x0a;just kidding, play again!&quot;" Foreground="#4caf50" FontSize="18" HorizontalAlignment="Center" FontFamily="Georgia" FontStyle="Italic" TextAlignment="Center" Margin="0,15"/>
                    <TextBlock x:Name="TotalScoreText" Foreground="White" FontSize="32" HorizontalAlignment="Center" FontFamily="Impact" Margin="0,20"/>
                    <TextBlock x:Name="TopScoresTextVictory" Foreground="#aaa" FontSize="16" HorizontalAlignment="Center" Margin="0,6" FontFamily="Consolas"/>
                    <TextBlock Text="Press R to Play Again | ESC to Quit" Foreground="#666" FontSize="16" HorizontalAlignment="Center" Margin="0,30,0,0" FontFamily="Consolas"/>
                </StackPanel>
            </Border>

            <!-- Pause / Settings Overlay -->
            <Border x:Name="PauseMenu" Visibility="Collapsed" Background="#CC000000" Width="500" Height="300" Canvas.Left="150" Canvas.Top="150" CornerRadius="8">
                <StackPanel Margin="20">
                    <TextBlock Text="Paused" FontFamily="Impact" FontSize="36" Foreground="#FFD700" HorizontalAlignment="Center"/>
                    <StackPanel Margin="0,20,0,0">
                        <TextBlock Text="Mouse Sensitivity" Foreground="#DDD" FontFamily="Consolas"/>
                        <Slider x:Name="PauseSensitivitySlider" Minimum="0.02" Maximum="2.0" Value="0.2" TickFrequency="0.02" IsSnapToTickEnabled="False"/>
                        <TextBlock x:Name="PauseSensitivityValue" Text="0.20" Foreground="#AAA" FontFamily="Consolas" Margin="0,6,0,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,24,0,0">
                        <Button x:Name="ResumeButton" Width="120" Height="36" Margin="6" Content="Resume"/>
                        <Button x:Name="QuitButton" Width="120" Height="36" Margin="6" Content="Quit"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Level Briefing Panel -->
            <Border x:Name="BriefingPanel" Visibility="Collapsed" Background="#EE101020" Width="700" Height="450" Canvas.Left="50" Canvas.Top="75" CornerRadius="12">
                <Border.BorderBrush>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FFD700" Offset="0"/>
                        <GradientStop Color="#FF6600" Offset="1"/>
                    </LinearGradientBrush>
                </Border.BorderBrush>
                <Border.BorderThickness>
                    <Thickness>3</Thickness>
                </Border.BorderThickness>
                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Level Title -->
                    <StackPanel Grid.Row="0">
                        <TextBlock Text="MISSION BRIEFING" Foreground="#FF6600" FontSize="14" FontFamily="Consolas" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock x:Name="BriefingTitle" Text="1-1: THE SPREADSHEET DIMENSION" 
                                   Foreground="#FFD700" FontSize="32" FontFamily="Impact" FontWeight="Bold" 
                                   HorizontalAlignment="Center" Margin="0,10,0,0">
                            <TextBlock.Effect>
                                <DropShadowEffect ShadowDepth="2" Color="Black" BlurRadius="5"/>
                            </TextBlock.Effect>
                        </TextBlock>
                    </StackPanel>
                    
                    <!-- Briefing Text -->
                    <Border Grid.Row="1" Background="#20000000" CornerRadius="8" Margin="0,20" Padding="20">
                        <TextBlock x:Name="BriefingText" 
                                   Text="Your spreadsheets have come alive..." 
                                   Foreground="#CCCCCC" FontSize="16" FontFamily="Consolas" 
                                   TextWrapping="Wrap" LineHeight="28"/>
                    </Border>
                    
                    <!-- Start Button -->
                    <StackPanel Grid.Row="2" HorizontalAlignment="Center">
                        <TextBlock Text="Press SPACE or ENTER to begin" 
                                   Foreground="#888888" FontSize="14" FontFamily="Consolas" 
                                   HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <Border Background="#FFD700" CornerRadius="6" Padding="30,10" Cursor="Hand"
                                MouseDown="BriefingStartButton_Click">
                            <TextBlock Text="LET'S ROCK!" Foreground="#000000" FontSize="20" FontFamily="Impact" FontWeight="Bold"/>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Menu / Mode Selection -->
            <Border x:Name="MainMenuPanel" Visibility="Collapsed" Background="#EE000010" Width="800" Height="600">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Title -->
                    <StackPanel Grid.Row="0" VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,20">
                        <TextBlock Text="S.O.U.P NUKEM" Foreground="#FFD700" FontSize="72" FontFamily="Impact" FontWeight="Bold" HorizontalAlignment="Center">
                            <TextBlock.Effect>
                                <DropShadowEffect ShadowDepth="4" Color="Black" BlurRadius="8"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        <TextBlock Text="CORPORATE WARFARE SIMULATOR" Foreground="#FF6600" FontSize="18" FontFamily="Consolas" HorizontalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- Menu Options -->
                    <StackPanel Grid.Row="1" HorizontalAlignment="Center" Margin="0,20">
                        <Button x:Name="CampaignButton" Width="300" Height="50" Margin="0,10" Content="CAMPAIGN MODE" 
                                FontSize="20" FontFamily="Impact" Click="CampaignButton_Click"/>
                        <Button x:Name="EndlessButton" Width="300" Height="50" Margin="0,10" Content="ENDLESS MODE" 
                                FontSize="20" FontFamily="Impact" Click="EndlessButton_Click"/>
                    </StackPanel>
                    
                    <!-- Instructions -->
                    <StackPanel Grid.Row="2" VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,30,0,0">
                        <TextBlock Text="WASD - Move | Mouse - Look | LMB - Shoot | 1-8 - Weapons" 
                                   Foreground="#666666" FontSize="12" FontFamily="Consolas" HorizontalAlignment="Center"/>
                        <TextBlock Text="ESC - Pause | Space - Jump | Ctrl - Crouch" 
                                   Foreground="#666666" FontSize="12" FontFamily="Consolas" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Canvas>
    </Grid>
</Window>